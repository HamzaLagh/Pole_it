{% import 'macros/pagination.html.twig' as macrosPagination %}
{% extends
'base.html.twig' %}
{% block title %}Forum visa
{% endblock %}
{# {% block
link %} <link rel="canonical" href="{{ path('app_home') }}" /> {% endblock link
%} #}
{% block content %}Liste des forums
{% endblock %}
{% block stylesheets %}

	{{ encore_entry_link_tags("home") }}
{% endblock %}
{% block body %}
	<div class="container" style="margin-top: 110px">


		<h3 class="text-center">Liste des sujets de discussions
		</h3>
		<br>
		{% if forum|length >0 %}
			<div class="row">
				{% for item in forum.results %}
					<div class="col-md-6 col-lg-6 col-xs-12 col-sm-12">
						<div class="image-reader list-forum-card" style="margin-bottom:12px">

							<div class="forun_header">
								<h3>
									<a href="{{ path('app_post_get_detail', { id: item.id }) }}">{{
        item.title
      }}</a>
								</h3>
								<br>


								<div class="float-start">
									{% if  'ROLE_ADMIN' in item.users.getroles() %}
										<img src="{{ asset('images/profile/admin.png') }}" width="50px" alt="user"/>
									{% else %}
										<img src="{{ asset(urlProfil ~ item.users.photo) }}" width="50px" alt="user"/>
									{% endif %}


									<span class="username">{{ item.users.username }}</span>
								</div><br>
								<div class="float-end">
									<p class="time" style="margin-bottom: 15px">
										<small>
											<i class="bi bi-calendar3"></i>
											Publi√©
											{{ item.createdAt | date|ago(locale='fr') }}</small>
									</p>
								</div><br>


							</div>

							<div class="forum-list-container">

								<a href="{{ path('like_post', { id: item.id }) }}" class="btn btn-link js-like">
									{% if app.user and item.isLikedByUser(app.user) %}
										<i class="fas fa-thumbs-up fa-2x"></i>
									{% else %}
										<i class="far fa-thumbs-up fa-2x"></i>
									{% endif %}

									<span class="js-likes" style="font-size:16px">&nbsp;{{ item.postLikes | length }}</span>
									<span class="js-label" style="font-size:16px">
										&nbsp;j'aime</span>
								</a>


								<p style="font-size:16px">
									<small>
										<i class="bi bi-chat"></i>
										<b>{{ item.comments | length }}</b>
									</small>
								</p>
								<p style="font-size:16px">
									<i class="bi bi-eye"></i>
									<b>{{ item.vues | length }}</b>
								</p>


							</div>
						</div>

					</div>


				{% endfor %}
			</div>
		{% endif %}

		<div class="paginations">
			{{ macrosPagination.pagination_post(forum,"app_post_forum") }}
		</div>
	</div>
{% endblock %}
{% block javascripts %}
	{{ encore_entry_script_tags("home") }}

{% endblock %}
